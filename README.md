<div align="center">

# WhatShouldICite

**ä¸­æ–‡åï¼šè¿™æ®µè¯è¯¥å¼•è°**

</div>

> Suggest citations for selected text in your editor.

ä¸€ä¸ª**ç¼–è¾‘å™¨å†… Agent å½¢æ€**çš„ç§‘ç ”è¾…åŠ©å·¥å…·ï¼Œå¸®åŠ©ä½ åœ¨å†™ä½œè¿‡ç¨‹ä¸­å¿«é€Ÿåˆ¤æ–­æ˜¯å¦éœ€è¦å¼•ç”¨ï¼Œä»¥åŠåº”è¯¥å¼•ç”¨ä»€ä¹ˆç±»å‹çš„å·¥ä½œã€‚

## ğŸ¯ æ ¸å¿ƒç‰¹ç‚¹

### ğŸŒ å…¨å±€å¯ç”¨ï¼ˆå·²å®ç°ï¼ï¼‰

- âœ… **è·¨åº”ç”¨ä½¿ç”¨**ï¼šåœ¨**ä»»ä½•åº”ç”¨**ä¸­éƒ½èƒ½ä½¿ç”¨ï¼ˆç¼–è¾‘å™¨ã€æµè§ˆå™¨ã€Wordã€WPS ç­‰ï¼‰
- âœ… **å…¨å±€å¿«æ·é”®**ï¼šæŒ‰ä¸‹ `Ctrl + Shift + C` å³å¯è§¦å‘
- âœ… **ç³»ç»Ÿçº§æµ®çª—**ï¼šä¸å—åº”ç”¨é™åˆ¶ï¼Œå§‹ç»ˆç½®é¡¶æ˜¾ç¤º

### ä¸æ‰“æ–­å†™ä½œæµç¨‹

- âœ… **é€‰ä¸­å³ç”¨**ï¼šç”¨é¼ æ ‡é€‰ä¸­ä¸€æ®µæ–‡æœ¬ï¼ŒæŒ‰ä¸‹å¿«æ·é”®
- âœ… **å³æ—¶åé¦ˆ**ï¼šå°æµ®çª—ç«‹å³æ˜¾ç¤ºå¼•ç”¨å»ºè®®
- âœ… **æ— éœ€åˆ‡æ¢**ï¼šä¸å¤åˆ¶ç²˜è´´ï¼Œä¸åˆ‡æ¢çª—å£ï¼Œä¸æ‰“æ–­å†™ä½œèŠ‚å¥

### å†™ä½œè¾…åŠ© Agent

è¿™ä¸æ˜¯ä¸€ä¸ªæ–‡çŒ®ç”Ÿæˆå™¨ï¼Œè€Œæ˜¯ä¸€ä¸ª**å†™ä½œè¾…åŠ© Agent**ï¼š

- ğŸ¤” **å¸®ä½ æ€è€ƒ**ï¼šè¿™æ®µè¯æ˜¯å¦éœ€è¦å¼•ç”¨ï¼Ÿ
- ğŸ¯ **æŒ‡å¼•æ–¹å‘**ï¼šåº”è¯¥å¼•ç”¨å“ªä¸€ç±»å·¥ä½œï¼Ÿ
- ğŸ” **æä¾›çº¿ç´¢**ï¼šæ¨èæ£€ç´¢å…³é”®è¯

## ğŸ“‹ è¾“å‡ºæ ¼å¼

Agent è¿”å›çš„å†…å®¹é€‚åˆåœ¨å°æµ®çª—ä¸­å¿«é€Ÿæ‰«ä¸€çœ¼ï¼š

```
ã€Do I need a citation?ã€‘
âœ”ï¸ Yes / âš ï¸ Optional / âŒ No

ã€Whyã€‘
- ç®€çŸ­ä¸€å¥è¯è¯´æ˜åŸå› 

ã€What to citeã€‘
- Foundational works on XXX
- Recent methods for XXX
- Surveys on XXXï¼ˆå¦‚é€‚ç”¨ï¼‰

ã€Search keywordsã€‘
- "xxx xxx problem"
- "xxx methods"
- "xxx benchmark"
```

**ç¦æ­¢è¾“å‡ºï¼š**
- âŒ é•¿æ®µè§£é‡Š
- âŒ å­¦æœ¯åºŸè¯
- âŒ è®ºæ–‡æ ‡é¢˜ / ä½œè€…åï¼ˆAgent ä¸ä¼šç¼–é€ å¼•ç”¨ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
pip install -r requirements.txt
pip install -e .
```

**æ³¨æ„**ï¼šWindows ä¸Šè¿è¡Œå…¨å±€æœåŠ¡å¯èƒ½éœ€è¦**ç®¡ç†å‘˜æƒé™**ï¼ˆç”¨äºæ³¨å†Œå…¨å±€å¿«æ·é”®ï¼‰ã€‚

### ğŸŒ å…¨å±€ä½¿ç”¨ï¼ˆæ¨èï¼‰

**åœ¨ä»»ä½•åº”ç”¨ä¸­éƒ½èƒ½ä½¿ç”¨ï¼**ï¼ˆç¼–è¾‘å™¨ã€ç½‘é¡µã€WPSã€Word ç­‰ï¼‰

```bash
python run_global_agent.py
```

å¯åŠ¨åï¼š
1. åœ¨**ä»»ä½•åº”ç”¨**ä¸­é€‰ä¸­ä¸€æ®µæ–‡æœ¬
2. æŒ‰ä¸‹ `Ctrl + Shift + C`ï¼ˆé»˜è®¤å¿«æ·é”®ï¼‰
3. ç«‹å³çœ‹åˆ°æµ®çª—ä¸­çš„å¼•ç”¨å»ºè®®
4. æŒ‰ `ESC` å…³é—­æµ®çª—

**ä½¿ç”¨åœºæ™¯ï¼š**
- âœ… VS Code / Vim / ä»»ä½•ç¼–è¾‘å™¨
- âœ… Chrome / Edge / ä»»ä½•æµè§ˆå™¨
- âœ… Word / WPS / ä»»ä½•æ–‡æ¡£ç¼–è¾‘å™¨
- âœ… ä»»ä½•å¯ä»¥é€‰ä¸­æ–‡æœ¬çš„åº”ç”¨

### ğŸ“ ç¼–ç¨‹æ¥å£ä½¿ç”¨

```python
from whatshouldicite import CitationAgent

agent = CitationAgent()

# åˆ†æé€‰ä¸­æ–‡æœ¬
selected_text = "Deep learning has revolutionized computer vision in recent years."
result = agent.analyze(selected_text)
print(result)
```

### å‘½ä»¤è¡Œæµ‹è¯•

```bash
python agent.py
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
whatshouldicite/
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ agent.py               # Agent å‘½ä»¤è¡Œæµ‹è¯•å…¥å£
â”œâ”€â”€ whatshouldicite/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ agent.py          # Agent æ ¸å¿ƒç±»ï¼ˆå¤„ç† selectionï¼‰
â”‚   â”œâ”€â”€ analyzer.py       # Text Analyzer
â”‚   â”œâ”€â”€ intent.py         # Citation Intent Classifier
â”‚   â”œâ”€â”€ planner.py         # Citation Type Planner
â”‚   â”œâ”€â”€ keywords.py        # Keyword Generator
â”‚   â”œâ”€â”€ prompts.py         # LLM æç¤ºè¯æ¨¡æ¿
â”‚   â””â”€â”€ utils.py           # å·¥å…·å‡½æ•°
â””â”€â”€ examples/
    â””â”€â”€ agent_demo.md      # ä½¿ç”¨ç¤ºä¾‹
```

## ğŸ”§ ä½¿ç”¨æ–¹å¼

### æ–¹å¼ 1ï¼šå…¨å±€æœåŠ¡ï¼ˆæ¨èï¼‰

è¿è¡Œ `python run_global_agent.py`ï¼Œå³å¯åœ¨ä»»ä½•åº”ç”¨ä¸­ï¼š
- é€‰ä¸­æ–‡æœ¬ â†’ æŒ‰å¿«æ·é”® â†’ **é€‰æ‹©æ¨¡å¼ï¼ˆ1/2/3ï¼‰** â†’ æŸ¥çœ‹å»ºè®®

**ä¸‰ç§åˆ†ææ¨¡å¼ï¼š**
- **æ¨¡å¼ 1**ï¼šè§„åˆ™åˆ¤æ–­ï¼ˆé»˜è®¤ï¼Œå¿«é€Ÿå…è´¹ï¼‰
- **æ¨¡å¼ 2**ï¼šLLM åˆ¤æ–­ï¼ˆæ›´å‡†ç¡®ï¼Œéœ€è¦ API keyï¼‰
- **æ¨¡å¼ 3**ï¼šæ··åˆæ¨¡å¼ï¼ˆå…ˆè§„åˆ™ï¼Œä¸ç¡®å®šæ—¶ç”¨ LLMï¼‰

**è¯¦è§**ï¼š[MODE_SELECTION_GUIDE.md](MODE_SELECTION_GUIDE.md)

### æ–¹å¼ 2ï¼šç¼–ç¨‹æ¥å£

```python
from whatshouldicite import CitationAgent

agent = CitationAgent()
result = agent.analyze(selected_text)
```

### æ–¹å¼ 3ï¼šè‡ªå®šä¹‰å¿«æ·é”®

```python
from whatshouldicite.global_agent import GlobalCitationAgent

# è‡ªå®šä¹‰å¿«æ·é”®
agent = GlobalCitationAgent(hotkey="ctrl+alt+c")
agent.start()
```

## ğŸ§  å·¥ä½œåŸç†

Agent åŒ…å«ä»¥ä¸‹é€»è¾‘æ¨¡å—ï¼š

1. **Text Analyzer**ï¼šåˆ†ææ–‡æœ¬ç‰¹å¾ï¼ˆå…³é”®è¯ã€é•¿åº¦ç­‰ï¼‰
2. **Citation Intent Classifier**ï¼šåˆ†ç±»å¼•ç”¨æ„å›¾ï¼ˆæ–¹æ³•ã€æ¯”è¾ƒã€äº‹å®é™ˆè¿°ç­‰ï¼‰
3. **Citation Type Planner**ï¼šè§„åˆ’åº”è¯¥å¼•ç”¨ä»€ä¹ˆç±»å‹çš„å·¥ä½œ
4. **Keyword Generator**ï¼šç”Ÿæˆæ£€ç´¢å…³é”®è¯

æ‰€æœ‰æ¨¡å—éƒ½æ»¡è¶³ï¼š
- **è¾“å…¥** = ä¸€å°æ®µè¢«é€‰ä¸­çš„æ–‡æœ¬ï¼ˆ1â€“5 å¥è¯ï¼‰
- **è¾“å‡º** = å¯å¿«é€Ÿæ‰«ä¸€çœ¼çš„ç»“æ„åŒ–è¯´æ˜

## âš™ï¸ LLM é›†æˆï¼ˆæ¨èï¼ï¼‰

### âœ… é»˜è®¤ï¼šè§„åˆ™åˆ¤æ–­ï¼ˆæ— éœ€ API keyï¼‰

**å¯ä»¥ç›´æ¥ä½¿ç”¨è§„åˆ™åˆ¤æ–­ï¼Œå®Œå…¨å…è´¹ï¼**

```python
from whatshouldicite import CitationAgent

# ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€é…ç½®
agent = CitationAgent()  # é»˜è®¤ä½¿ç”¨è§„åˆ™åˆ¤æ–­
result = agent.analyze("Deep learning has revolutionized computer vision.")
```

**ä¼˜ç‚¹ï¼š**
- âœ… **æ— éœ€ API key**
- âœ… **æ— éœ€ç½‘ç»œè¿æ¥**
- âœ… **å®Œå…¨å…è´¹**
- âœ… **å¿«é€Ÿå“åº”**ï¼ˆæ¯«ç§’çº§ï¼‰
- âœ… **éšç§å®‰å…¨**ï¼ˆå®Œå…¨æœ¬åœ°å¤„ç†ï¼‰

**å‡†ç¡®ç‡**ï¼šçº¦ 70-80%ï¼ˆå¸¸è§æ¨¡å¼ï¼‰

### ğŸ¤– æ¨èï¼šæ¥å…¥ LLMï¼ˆå‡†ç¡®ç‡ 85-95%ï¼‰

**æ¥å…¥ LLM åï¼Œå‡†ç¡®ç‡å¤§å¹…æå‡ï¼**

#### å¿«é€Ÿå¼€å§‹ï¼ˆ3 æ­¥ï¼‰

1. **å®‰è£…ä¾èµ–**
```bash
pip install openai  # æˆ– anthropic
```

2. **é…ç½® API key**
```bash
# æ–¹å¼ 1ï¼šç¯å¢ƒå˜é‡
export OPENAI_API_KEY="sk-..."

# æ–¹å¼ 2ï¼šé…ç½®æ–‡ä»¶ï¼ˆæ¨èï¼‰
cp config_example.py config.py
# ç¼–è¾‘ config.pyï¼Œå¡«å…¥ API key
```

3. **å¯åŠ¨æœåŠ¡**
```bash
python run_with_llm.py
```

#### ç¼–ç¨‹æ–¹å¼

```python
from whatshouldicite import CitationAgent
from whatshouldicite.llm_client import OpenAIClient, UnifiedLLMClient

# OpenAIï¼ˆæ¨èï¼šGPT-3.5-turboï¼Œä¾¿å®œå¿«é€Ÿï¼‰
client = OpenAIClient(api_key="sk-...", model="gpt-3.5-turbo")
unified_client = UnifiedLLMClient(client)
agent = CitationAgent(llm_client=unified_client)

# æˆ– Anthropic Claudeï¼ˆæ¨èï¼šHaikuï¼Œä¾¿å®œå¿«é€Ÿï¼‰
from whatshouldicite.llm_client import AnthropicClient
client = AnthropicClient(api_key="sk-ant-...")
unified_client = UnifiedLLMClient(client)
agent = CitationAgent(llm_client=unified_client)
```

#### æˆæœ¬

- **å•æ¬¡åˆ†æ**ï¼šçº¦ $0.0004ï¼ˆä¸åˆ° 0.001 å…ƒï¼‰
- **æ¯å¤© 100 æ¬¡**ï¼šçº¦ $0.04ï¼ˆçº¦ 0.3 å…ƒï¼‰
- **éå¸¸ä¾¿å®œï¼**

#### æ”¯æŒçš„ LLM

- âœ… **OpenAI**ï¼šGPT-3.5-turboï¼ˆæ¨èï¼‰ã€GPT-4
- âœ… **Anthropic**ï¼šClaude Haikuï¼ˆæ¨èï¼‰ã€Claude Sonnetã€Claude Opus

**é‡è¦é™åˆ¶ï¼š**
- âœ… LLM åªç”¨äºï¼šåˆ†ç±»ã€æ¨æ–­ã€å»ºè®®
- âŒ LLM **ä¸¥ç¦**ï¼šç¼–é€ å¼•ç”¨ã€ç»™å‡ºè®ºæ–‡åç§°ã€ç»™å‡ºä½œè€…

**è¯¦ç»†æŒ‡å—**ï¼š
- ğŸ“– [LLM_SETUP.md](LLM_SETUP.md) - å®Œæ•´ LLM é…ç½®æŒ‡å—
- ğŸ“– [NO_API_KEY_NEEDED.md](NO_API_KEY_NEEDED.md) - è§„åˆ™åˆ¤æ–­è¯´æ˜

## ğŸ¯ è®¾è®¡ç›®æ ‡

è¿™ä¸ª Agent çš„ç›®æ ‡æ˜¯ï¼š

- âœ… **ä¸æ‰“æ–­å†™ä½œ**ï¼šå†™ä½œä¸­é€”éšæ—¶å¯å¬å”¤
- âœ… **ä¸åˆ¶é€ é£é™©**ï¼šä¸ç¼–é€ å¼•ç”¨ï¼Œåªç»™å»ºè®®
- âœ… **ä¸è®©ç”¨æˆ·æ€è€ƒ"æˆ‘è¯¥ä¸è¯¥ä¿¡å®ƒ"**ï¼šæ˜ç¡®è¿™æ˜¯å»ºè®®ï¼Œä¸æ˜¯ç­”æ¡ˆ

è€Œæ˜¯ï¼š
> "å“¦ï¼Œè¿™é‡Œæˆ‘åº”è¯¥å»æ‰¾æŸä¸€ç±»å·¥ä½œã€‚"

## ğŸ“ ç¤ºä¾‹

æŸ¥çœ‹ `examples/agent_demo.md` äº†è§£è¯¦ç»†ä½¿ç”¨ç¤ºä¾‹ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**è®°ä½**ï¼šè¿™æ˜¯ä¸€ä¸ª**å†™ä½œè¾…åŠ© Agent**ï¼Œè€Œä¸æ˜¯æ–‡çŒ®ç”Ÿæˆå™¨ã€‚å®ƒå¸®åŠ©ä½ æ€è€ƒï¼Œè€Œä¸æ˜¯æ›¿ä½ æ€è€ƒã€‚

---

## ğŸ‘¤ ä½œè€… (Author)

**Haoze Zheng**

*   ğŸ“ **School**: Xinjiang University (XJU)
*   ğŸ“§ **Email**: zhenghaoze@stu.xju.edu.cn
*   ğŸ± **GitHub**: [mire403](https://github.com/mire403)

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ Starï¼**

<sub>Made by Haoze Zheng. 2026 WhatShouldICite.</sub>

</div>
